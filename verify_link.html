<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>EZM Cyber â€” Link Checker</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0}
:root{
--bg-1:#06060a; --bg-2:#0b0710;
--accent:#00ffcc; --muted:#9fb6b0;
--clean:#16a34a; --suspicious:#f59e0b; --phish:#ef4444; --unrated:#6b7280;
--bubble-user:#00ffcc25; --bubble-bot:#071218;
}
body{
background:linear-gradient(135deg,var(--bg-1),var(--bg-2));
color:#e6fff8;font-family:"Orbitron",system-ui,sans-serif;
height:100vh;display:flex;flex-direction:column;
}
#chat-container{
flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:16px;scroll-behavior:smooth;
}
.msg{
max-width:85%;padding:12px 16px;border-radius:16px;line-height:1.5;word-wrap:break-word;
font-size:0.95rem;display:inline-block;position:relative;animation:pop 0.25s ease-out;
}
@keyframes pop{0%{transform:scale(0.95);opacity:0}100%{transform:scale(1);opacity:1}}
.user{align-self:flex-end;background:var(--bubble-user);border:1px solid rgba(0,255,204,0.3);color:#e6fff8}
.bot{align-self:flex-start;background:var(--bubble-bot);border:1px solid rgba(0,255,204,0.1)}
.bot strong{color:var(--accent)}
#input-bar{display:flex;padding:12px;border-top:1px solid rgba(0,255,204,0.1);background:rgba(255,255,255,0.03)}
#url-input{flex:1;padding:12px;border:none;background:rgba(0,0,0,0.3);color:#e6fff8;border-radius:8px;font-size:1rem}
#send-btn{margin-left:8px;padding:12px 18px;background:var(--accent);color:#001517;font-weight:700;border:none;border-radius:8px;cursor:pointer;transition:0.2s;touch-action:manipulation;-webkit-tap-highlight-color:transparent}
#send-btn:active{transform:scale(0.95)}
#send-btn:hover{filter:brightness(1.2)}
.status-safe{color:var(--clean)}
.status-susp{color:var(--suspicious)}
.status-bad{color:var(--phish)}
.vendor-grid{margin-top:10px;display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:8px}
.vendor-card{padding:8px;border-radius:8px;background:rgba(255,255,255,0.05);border:1px solid rgba(0,255,204,0.06);font-size:0.8rem;text-align:center}
.typing{display:inline-block;font-style:italic;opacity:0.8}
.dot{animation:blink 1.2s infinite}
@keyframes blink{0%,20%{opacity:0}50%{opacity:1}100%{opacity:0}}
footer{text-align:center;padding:10px;color:var(--muted);font-size:0.8rem}
@media (max-width:600px){
#chat-container{padding:12px;gap:12px}
#url-input{font-size:0.9rem}
#send-btn{padding:10px 14px;font-size:0.9rem}
.vendor-card{font-size:0.75rem}
.msg{font-size:0.88rem}
}
</style>
</head>
<body>
<div id="chat-container">
<div class="msg bot"><strong>EZM:</strong> Send me a link ğŸ”</div>
</div>
<div id="input-bar">
<input id="url-input" type="text" placeholder="Drop a link..." autocomplete="off">
<button id="send-btn">Send</button>
</div>
<footer>EZM Cyber</footer>
<script>
const BACKEND_API = 'https://ethwebsite-ulau.onrender.com/api/virustotal';
const chat = document.getElementById('chat-container');
const input = document.getElementById('url-input');
const sendBtn = document.getElementById('send-btn');

const scanningMessages = [
â€œCheckingâ€¦â€,
â€œScanning ğŸ”â€,
â€œRunning checksâ€¦â€,
â€œOn itâ€¦â€,
â€œAnalyzingâ€¦â€
];

const cleanResponses = [
â€œClean âœ…â€,
â€œLooks safeâ€,
â€œAll clearâ€,
â€œYouâ€™re goodâ€,
â€œNo threatsâ€
];

const suspiciousResponses = [
â€œSketchy âš ï¸â€,
â€œSuspiciousâ€,
â€œBe carefulâ€,
â€œWatch outâ€,
â€œNot greatâ€
];

const maliciousResponses = [
â€œDangerous! âŒâ€,
â€œThreat detectedâ€,
â€œStay awayâ€,
â€œMaliciousâ€,
â€œDonâ€™t clickâ€
];

const errorMessages = [
â€œError. Try again?â€,
â€œCouldnâ€™t scan. Retry?â€,
â€œSomething brokeâ€,
â€œBackend issueâ€
];

function getRandom(arr) {
return arr[Math.floor(Math.random() * arr.length)];
}

function addMessage(text, sender=â€˜botâ€™){
const div = document.createElement(â€˜divâ€™);
div.className = `msg ${sender}`;
div.innerHTML = text;
chat.appendChild(div);
chat.scrollTop = chat.scrollHeight;
return div;
}

function verdictClass(v){
if(v === â€˜phishâ€™ || v === â€˜maliciousâ€™) return â€˜status-badâ€™;
if(v === â€˜suspiciousâ€™) return â€˜status-suspâ€™;
return â€˜status-safeâ€™;
}

function addTyping(){
return addMessage(`<span class="typing">${getRandom(scanningMessages)}<span class="dot">.</span><span class="dot">.</span><span class="dot">.</span></span>`, â€˜botâ€™);
}

function detectSiteType(url) {
const lower = url.toLowerCase();
if(lower.includes(â€˜bit.lyâ€™) || lower.includes(â€˜tinyurlâ€™)) return â€˜shortenerâ€™;
if(lower.includes(â€˜facebookâ€™) || lower.includes(â€˜twitterâ€™)) return â€˜socialâ€™;
return â€˜generalâ€™;
}

async function analyzeLink(url){
const typingDiv = addTyping();
const siteType = detectSiteType(url);

try{
const resp = await fetch(BACKEND_API, {
method: â€˜POSTâ€™,
headers: {â€˜Content-Typeâ€™: â€˜application/jsonâ€™},
body: JSON.stringify({url})
});

```
if(!resp.ok) throw new Error(`Error ${resp.status}`);
const data = await resp.json();
if(!data.last_analysis_results) throw new Error('Invalid response');

const vendors = Object.entries(data.last_analysis_results).map(([name, info]) => {
  const cat = info?.category?.toLowerCase() || 'unrated';
  let v = 'unrated';
  if(cat === 'malicious' || cat === 'phishing') v = 'phish';
  else if(cat === 'suspicious') v = 'suspicious';
  else if(cat === 'harmless' || cat === 'clean') v = 'clean';
  return {name, verdict: v};
});

const stats = {mal: 0, susp: 0, clean: 0};
vendors.forEach(v => {
  if(v.verdict === 'phish') stats.mal++;
  else if(v.verdict === 'suspicious') stats.susp++;
  else if(v.verdict === 'clean') stats.clean++;
});

const total = vendors.length;
const threatCount = stats.mal + stats.susp;
let status = 'safe';
let responseMsg = '';

if(stats.mal > 0) {
  status = 'bad';
  responseMsg = getRandom(maliciousResponses);
} else if(stats.susp > 0) {
  status = 'susp';
  responseMsg = getRandom(suspiciousResponses);
} else {
  status = 'safe';
  responseMsg = getRandom(cleanResponses);
}

let contextNote = '';
if(siteType === 'shortener' && stats.mal === 0) {
  contextNote = '<br><small>âš ï¸ URL shortener</small>';
}

let html = `<strong>${responseMsg}</strong>${contextNote}<br>`;
html += `<small>${threatCount}/${total} flagged</small>`;

html += `<div class="vendor-grid">` + vendors.slice(0, 60).map(v => `
  <div class="vendor-card">${v.name}<br><span class="${verdictClass(v.verdict)}">${v.verdict}</span></div>
`).join('') + `</div>`;

typingDiv.remove();
addMessage(html, 'bot');
```

} catch(e) {
console.error(e);
typingDiv.remove();
addMessage(`<strong>${getRandom(errorMessages)}</strong>`, â€˜botâ€™);
}
}

function handleSend() {
const val = input.value.trim();
if(!val) return;
addMessage(val, â€˜userâ€™);
input.value = â€˜â€™;

let normalized = val;
if(!/^https?:///i.test(val)) normalized = â€˜http://â€™ + val;

try {
new URL(normalized);
analyzeLink(normalized);
} catch {
addMessage(â€™<strong>Invalid URL</strong>â€™, â€˜botâ€™);
}
}

sendBtn.addEventListener(â€˜clickâ€™, handleSend);
sendBtn.addEventListener(â€˜touchendâ€™, (e) => {
e.preventDefault();
handleSend();
});

input.addEventListener(â€˜keypressâ€™, e => {
if(e.key === â€˜Enterâ€™) {
e.preventDefault();
handleSend();
}
});
</script>

</body>
</html>