<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>EZM Cyber ‚Äî Link Checker</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg1:#010409; --bg2:#051014;
  --accent:#00ffcc; --muted:#9fb6b0;
  --safe:#16a34a; --susp:#f59e0b; --bad:#ef4444;
}
body{
  font-family:"Orbitron",system-ui,sans-serif;
  background: radial-gradient(circle at 20% 20%, #021018 0%, #000408 80%);
  color:#e8fff7;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  overflow:hidden;
}

/* Subtle animated background glow */
body::before{
  content:"";
  position:fixed;
  top:-50%;left:-50%;
  width:200%;height:200%;
  background:conic-gradient(from 90deg at 50% 50%, #00ffcc11, #001010, #00ffcc11);
  animation:spin 12s linear infinite;
  z-index:-1;
  filter:blur(120px);
}
@keyframes spin{to{transform:rotate(360deg)}}

#chat-container{
  flex:1;
  overflow-y:auto;
  padding:20px;
  display:flex;
  flex-direction:column;
  gap:18px;
  scroll-behavior:smooth;
}

.msg{
  max-width:85%;
  padding:14px 18px;
  border-radius:14px;
  line-height:1.6;
  word-wrap:break-word;
  font-size:0.95rem;
  display:inline-block;
  animation:fadeIn 0.25s ease-out;
  backdrop-filter:blur(3px);
}
.user{
  align-self:flex-end;
  background:rgba(0,255,204,0.15);
  border:1px solid rgba(0,255,204,0.3);
}
.bot{
  align-self:flex-start;
  background:rgba(0,255,204,0.05);
  border:1px solid rgba(0,255,204,0.15);
}
@keyframes fadeIn{from{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}

.typing{opacity:0.7;font-style:italic}
.dot{animation:blink 1.2s infinite}
@keyframes blink{0%,20%{opacity:0}50%{opacity:1}100%{opacity:0}}

#input-bar{
  display:flex;
  padding:14px;
  border-top:1px solid rgba(0,255,204,0.15);
  background:rgba(0,255,204,0.02);
}
#url-input{
  flex:1;
  padding:14px;
  background:rgba(0,0,0,0.4);
  border:1px solid rgba(0,255,204,0.2);
  color:#e8fff7;
  border-radius:8px;
  font-size:1rem;
  outline:none;
  transition:0.2s;
}
#url-input:focus{
  border-color:var(--accent);
  box-shadow:0 0 8px rgba(0,255,204,0.4);
}
#send-btn{
  margin-left:10px;
  padding:14px 20px;
  background:var(--accent);
  color:#001717;
  font-weight:700;
  border:none;
  border-radius:8px;
  cursor:pointer;
  transition:0.25s;
}
#send-btn:hover{
  transform:scale(1.05);
  box-shadow:0 0 18px rgba(0,255,204,0.6);
}

/* Main scan result panel */
#main-result{
  padding:22px;
  border-radius:12px;
  background:rgba(0,255,204,0.08);
  border:1px solid rgba(0,255,204,0.2);
  box-shadow:0 0 40px rgba(0,255,204,0.15);
  animation:pop 0.5s ease-out;
}
@keyframes pop{from{transform:scale(0.96);opacity:0}to{transform:scale(1);opacity:1}}

.status-safe{color:var(--safe)}
.status-susp{color:var(--susp)}
.status-bad{color:var(--bad)}

.vendor-grid{
  margin-top:12px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
  gap:8px;
}
.vendor-card{
  background:rgba(255,255,255,0.05);
  border:1px solid rgba(0,255,204,0.06);
  border-radius:8px;
  text-align:center;
  padding:8px;
  font-size:0.8rem;
  transition:0.2s;
}
.vendor-card:hover{
  background:rgba(0,255,204,0.12);
  transform:scale(1.03);
}

footer{
  text-align:center;
  padding:10px;
  font-size:0.8rem;
  color:var(--muted);
  background:rgba(0,255,204,0.02);
  border-top:1px solid rgba(0,255,204,0.05);
}
</style>
</head>
<body>

<div id="chat-container">
  <div class="msg bot">Drop any link and I‚Äôll scan it with the top security vendors to see if it‚Äôs safe üîç</div>
</div>

<div id="input-bar">
  <input id="url-input" type="text" placeholder="Paste a link to analyze..." autocomplete="off">
  <button id="send-btn">Scan</button>
</div>

<footer>Secure ‚Ä¢ Protect ‚Ä¢ Respond</footer>

<script>
const BACKEND_API = 'https://your-backend-domain.com/api/scan'; // replace after deployment

const chat=document.getElementById('chat-container');
const input=document.getElementById('url-input');
const send=document.getElementById('send-btn');

function addMessage(text,sender='bot'){
  const div=document.createElement('div');
  div.className=`msg ${sender}`;
  div.innerHTML=text;
  chat.appendChild(div);
  chat.scrollTop=chat.scrollHeight;
  return div;
}
function verdictColor(v){
  if(v==='malicious'||v==='phish')return'bad';
  if(v==='suspicious')return'susp';
  return'safe';
}
function typing(){
  return addMessage(`<span class="typing">Scanning<span class="dot">.</span><span class="dot">.</span><span class="dot">.</span></span>`,'bot');
}

async function analyze(url){
  const t=typing();
  try{
    const r=await fetch(BACKEND_API,{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({url})
    });
    const d=await r.json();
    t.remove();

    if(!d.last_analysis_results)return addMessage('‚ö†Ô∏è Invalid scan result','bot');
    const vendors=Object.entries(d.last_analysis_results).map(([n,v])=>{
      const cat=v.category?.toLowerCase()||'unrated';
      let status='unrated';
      if(cat.includes('malicious')||cat.includes('phish'))status='phish';
      else if(cat.includes('suspicious'))status='suspicious';
      else if(cat.includes('clean')||cat.includes('harmless'))status='clean';
      return {n,status};
    });

    const total=vendors.length;
    const bad=vendors.filter(v=>v.status==='phish').length;
    const susp=vendors.filter(v=>v.status==='suspicious').length;

    let overall='safe',label='CLEAN';
    if(bad>0){overall='bad';label='MALICIOUS';}
    else if(susp>0){overall='susp';label='SUSPICIOUS';}

    const html=`<strong>Status:</strong> <span class="status-${overall}">${label}</span><br>
    <small>Detections: ${bad+susp}/${total}</small>
    <div class="vendor-grid">
      ${vendors.slice(0,90).map(v=>`<div class="vendor-card">${v.n}<br><span class="status-${verdictColor(v.status)}">${v.status.toUpperCase()}</span></div>`).join('')}
    </div>`;

    let box=document.getElementById('main-result');
    if(!box){
      box=document.createElement('div');
      box.id='main-result';
      chat.prepend(box);
    }
    box.innerHTML=`<strong>üîç Latest Scan Result</strong><br><br>${html}`;
  }catch(err){
    t.remove();
    addMessage('‚ö†Ô∏è Unable to scan now.','bot');
  }
}

send.onclick=()=>{
  const v=input.value.trim();
  if(!v)return;
  addMessage(v,'user');
  input.value='';
  let u=v;
  if(!/^https?:\/\//i.test(v))u='http://'+v;
  try{new URL(u);analyze(u);}catch{addMessage('Invalid URL','bot');}
};
input.addEventListener('keypress',e=>{if(e.key==='Enter')send.click()});
</script>
</body>
</html>