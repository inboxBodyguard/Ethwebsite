<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>EZM Cyber â€” Link Checker</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0}
:root{
--bg-1:#06060a; --bg-2:#0b0710;
--accent:#00ffcc; --muted:#9fb6b0;
--clean:#16a34a; --suspicious:#f59e0b; --phish:#ef4444; --unrated:#6b7280;
--bubble-user:#00ffcc25; --bubble-bot:#071218;
}
body{
background:linear-gradient(135deg,var(--bg-1),var(--bg-2));
color:#e6fff8;font-family:"Orbitron",system-ui,sans-serif;
height:100vh;display:flex;flex-direction:column;
}
#chat-container{
flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:16px;scroll-behavior:smooth;
}
.msg{
max-width:85%;padding:12px 16px;border-radius:16px;line-height:1.5;word-wrap:break-word;
font-size:0.95rem;display:inline-block;position:relative;animation:pop 0.25s ease-out;
}
@keyframes pop{0%{transform:scale(0.95);opacity:0}100%{transform:scale(1);opacity:1}}
.user{align-self:flex-end;background:var(--bubble-user);border:1px solid rgba(0,255,204,0.3);color:#e6fff8}
.bot{align-self:flex-start;background:var(--bubble-bot);border:1px solid rgba(0,255,204,0.1)}
.bot strong{color:var(--accent)}
#input-bar{display:flex;padding:12px;border-top:1px solid rgba(0,255,204,0.1);background:rgba(255,255,255,0.03)}
#url-input{flex:1;padding:12px;border:none;background:rgba(0,0,0,0.3);color:#e6fff8;border-radius:8px;font-size:1rem}
#send-btn{margin-left:8px;padding:12px 18px;background:var(--accent);color:#001517;font-weight:700;border:none;border-radius:8px;cursor:pointer;transition:0.2s}
#send-btn:hover{filter:brightness(1.2)}
.status-safe{color:var(--clean)}
.status-susp{color:var(--suspicious)}
.status-bad{color:var(--phish)}
.vendor-grid{margin-top:10px;display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:8px}
.vendor-card{padding:8px;border-radius:8px;background:rgba(255,255,255,0.05);border:1px solid rgba(0,255,204,0.06);font-size:0.8rem;text-align:center}
.typing{display:inline-block;font-style:italic;opacity:0.8}
.dot{animation:blink 1.2s infinite}
@keyframes blink{0%,20%{opacity:0}50%{opacity:1}100%{opacity:0}}
footer{text-align:center;padding:10px;color:var(--muted);font-size:0.8rem}
@media (max-width:600px){
#chat-container{padding:12px;gap:12px}
#url-input{font-size:0.9rem}
#send-btn{padding:10px 14px;font-size:0.9rem}
.vendor-card{font-size:0.75rem}
}
</style>
</head>
<body>
<div id="chat-container">
<div class="msg bot"><strong>EZM Cyber:</strong> Hey! Send me any link and I'll run it through my threat scanner. Let's see what we're dealing with ğŸ”</div>
</div>
<div id="input-bar">
<input id="url-input" type="text" placeholder="Drop a link, email, or domain..." autocomplete="off">
<button id="send-btn">Send</button>
</div>
<footer>EZM Cyber â€” Real Threat Intel, Real Talk</footer>
<script>
const BACKEND_API = 'https://ethwebsite-ulau.onrender.com/api/virustotal';
const chat = document.getElementById('chat-container');
const input = document.getElementById('url-input');
const sendBtn = document.getElementById('send-btn');

// Random human-like responses
const scanningMessages = [
â€œAlright, running this through the scannerâ€¦â€,
â€œGot it, checking with the security engines now ğŸ”â€,
â€œLet me see what weâ€™re working with hereâ€¦â€,
â€œOn it â€” pulling threat intel nowâ€¦â€,
â€œScanning across multiple vendors, hold tightâ€¦â€,
â€œAnalyzing this one for youâ€¦â€,
â€œLet me check if this is legit or susâ€¦â€
];

const cleanResponses = [
â€œYouâ€™re good! This one checks out clean.â€,
â€œAll clear â€” no threats detected here.â€,
â€œLooks safe to me. Youâ€™re in the clear.â€,
â€œClean scan! Nothing sketchy found.â€,
â€œThis oneâ€™s legit. No red flags.â€,
â€œSafe and sound â€” nothing to worry about.â€
];

const suspiciousResponses = [
â€œHmm, this oneâ€™s a bit sketchy. Iâ€™d be careful.â€,
â€œGot some suspicious flags here. Proceed with caution.â€,
â€œNot the worst, but definitely questionable. Watch out.â€,
â€œA few vendors are side-eyeing this one. Be cautious.â€,
â€œSuspicious vibes â€” I wouldnâ€™t trust it fully.â€,
â€œSome red flags popping up. Tread carefully.â€
];

const maliciousResponses = [
â€œYikes. This is flagged as malicious. Stay far away.â€,
â€œHard pass on this one â€” itâ€™s a threat.â€,
â€œThis is bad news. Do NOT click it.â€,
â€œMajor red flags. This is a confirmed threat.â€,
â€œNope, this is dangerous. Avoid at all costs.â€,
â€œThis oneâ€™s actively malicious. Donâ€™t go near it.â€
];

const errorMessages = [
â€œOof, something went wrong on my end. Try again?â€,
â€œBackend hiccup â€” couldnâ€™t scan that one. Give it another shot.â€,
â€œRan into an issue. Mind resending?â€,
â€œHmm, that didnâ€™t work. Letâ€™s try again.â€,
â€œError on my side â€” hit me with it one more time.â€
];

function getRandom(arr) {
return arr[Math.floor(Math.random() * arr.length)];
}

function addMessage(text, sender=â€˜botâ€™){
const div = document.createElement(â€˜divâ€™);
div.className = `msg ${sender}`;
div.innerHTML = text;
chat.appendChild(div);
chat.scrollTop = chat.scrollHeight;
return div;
}

function verdictClass(v){
if(v === â€˜phishâ€™ || v === â€˜maliciousâ€™) return â€˜status-badâ€™;
if(v === â€˜suspiciousâ€™) return â€˜status-suspâ€™;
return â€˜status-safeâ€™;
}

function addTyping(){
return addMessage(`<span class="typing">${getRandom(scanningMessages)}<span class="dot">.</span><span class="dot">.</span><span class="dot">.</span></span>`, â€˜botâ€™);
}

function detectSiteType(url) {
const lower = url.toLowerCase();
if(lower.includes(â€˜amazâ€™) || lower.includes(â€˜ebayâ€™) || lower.includes(â€˜shopâ€™)) return â€˜e-commerceâ€™;
if(lower.includes(â€˜facebookâ€™) || lower.includes(â€˜twitterâ€™) || lower.includes(â€˜instagramâ€™)) return â€˜socialâ€™;
if(lower.includes(â€˜govâ€™) || lower.includes(â€™.eduâ€™)) return â€˜officialâ€™;
if(lower.includes(â€˜bit.lyâ€™) || lower.includes(â€˜tinyurlâ€™) || lower.includes(â€˜shortâ€™)) return â€˜shortenerâ€™;
return â€˜generalâ€™;
}

async function analyzeLink(url){
const typingDiv = addTyping();
const siteType = detectSiteType(url);

try{
const resp = await fetch(BACKEND_API, {
method: â€˜POSTâ€™,
headers: {â€˜Content-Typeâ€™: â€˜application/jsonâ€™},
body: JSON.stringify({url})
});

```
if(!resp.ok) throw new Error(`Error ${resp.status}`);
const data = await resp.json();
if(!data.last_analysis_results) throw new Error('Invalid response');

const vendors = Object.entries(data.last_analysis_results).map(([name, info]) => {
  const cat = info?.category?.toLowerCase() || 'unrated';
  let v = 'unrated';
  if(cat === 'malicious' || cat === 'phishing') v = 'phish';
  else if(cat === 'suspicious') v = 'suspicious';
  else if(cat === 'harmless' || cat === 'clean') v = 'clean';
  return {name, verdict: v};
});

const stats = {mal: 0, susp: 0, clean: 0};
vendors.forEach(v => {
  if(v.verdict === 'phish') stats.mal++;
  else if(v.verdict === 'suspicious') stats.susp++;
  else if(v.verdict === 'clean') stats.clean++;
});

const total = vendors.length;
const threatCount = stats.mal + stats.susp;
let status = 'safe';
let responseMsg = '';

if(stats.mal > 0) {
  status = 'bad';
  responseMsg = getRandom(maliciousResponses);
} else if(stats.susp > 0) {
  status = 'susp';
  responseMsg = getRandom(suspiciousResponses);
} else {
  status = 'safe';
  responseMsg = getRandom(cleanResponses);
}

// Add context based on site type
let contextNote = '';
if(siteType === 'shortener' && stats.mal === 0) {
  contextNote = '<br><small>âš ï¸ Heads up: URL shorteners can hide the real destination. Be cautious.</small>';
} else if(siteType === 'social' && status === 'safe') {
  contextNote = '<br><small>âœ… Recognized social media domain.</small>';
} else if(siteType === 'official' && status === 'safe') {
  contextNote = '<br><small>âœ… Looks like an official/educational site.</small>';
}

let html = `<strong>${responseMsg}</strong>${contextNote}<br><br>`;
html += `<small>Detections: ${threatCount}/${total} vendors flagged this</small>`;

html += `<div class="vendor-grid">` + vendors.slice(0, 90).map(v => `
  <div class="vendor-card">${v.name}<br><span class="${verdictClass(v.verdict)}">${v.verdict.toUpperCase()}</span></div>
`).join('') + `</div>`;

typingDiv.remove();
addMessage(html, 'bot');
```

} catch(e) {
console.error(e);
typingDiv.remove();
addMessage(`<strong>${getRandom(errorMessages)}</strong>`, â€˜botâ€™);
}
}

sendBtn.onclick = () => {
const val = input.value.trim();
if(!val) return;
addMessage(val, â€˜userâ€™);
input.value = â€˜â€™;

let normalized = val;
if(!/^https?:///i.test(val)) normalized = â€˜http://â€™ + val;

try {
new URL(normalized);
analyzeLink(normalized);
} catch {
addMessage(â€™<strong>That doesn't look like a valid URL.</strong> Try something like â€œexample.comâ€ or paste a full link.â€™, â€˜botâ€™);
}
};

input.addEventListener(â€˜keypressâ€™, e => {
if(e.key === â€˜Enterâ€™) sendBtn.click();
});
</script>

</body>
</html>